{"ast":null,"code":"var _jsxFileName = \"/Users/paulhoffart/Desktop/Atomic-Job/atomic-job-front-end/src/containers/Jobs.js\";\nimport React from 'react'; // import JobShow from \"../components/JobShow\"\n// import JobList from \"../void/JobList\"\n\nimport List from '../components/List';\nimport JobForm from \"../components/JobForm\";\nimport JobModalShow from '../components/JobModalShow';\nexport default class Jobs extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleShowJob = job => {\n      this.setState({\n        showJob: job\n      });\n    };\n\n    this.handleBack = () => {\n      this.setState({\n        showJob: null\n      });\n    };\n\n    this.handleSearch = e => {\n      let searchedJobs = this.state.jobs.filter(job => job.title.toLowerCase().includes(e.target.value.toLowerCase()) || job.company.toLowerCase().includes(e.target.value.toLowerCase()) || job.location.toLowerCase(e.targe.value.tolo));\n      this.setState({\n        jobsDisplay: searchedJobs\n      });\n    };\n\n    this.handleSort = e => {\n      let sortBy = e.target.getAttribute(\"name\");\n      let sorted;\n      this.state.sortAsc ? sorted = this.state.jobsDisplay.sort((jobA, jobB) => jobA[sortBy] > jobB[sortBy] ? 1 : -1) : sorted = this.state.jobsDisplay.sort((jobA, jobB) => jobA[sortBy] > jobB[sortBy] ? -1 : 1);\n      this.setState({\n        sortAsc: !this.state.sortAsc,\n        jobsDisplay: sorted\n      });\n    };\n\n    this.addJob = event => {\n      event.preventDefault();\n      let postObject = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.token}`\n        },\n        body: JSON.stringify({\n          title: event.target[0].value,\n          company: event.target[1].value,\n          location: event.target[2].value,\n          url: event.target[3].value,\n          status: \"Not Applied\",\n          interview: \"false\",\n          user_id: this.state.user_id\n        })\n      };\n      event.target.reset();\n      fetch(\"http://localhost:3000/jobs\", postObject).then(resp => resp.json()).then(newJob => {\n        console.log(\"newJob posted\", newJob);\n        this.state.jobs ? this.state.jobs.push(newJob) : this.state.jobs = [newJob];\n        this.setState({\n          jobs: this.state.jobs,\n          jobsDisplay: this.state.jobs\n        });\n      });\n    };\n\n    this.editJob = job => {\n      fetch(`http://localhost:3000/jobs/${job.id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.token}`\n        },\n        body: JSON.stringify({\n          title: job.title,\n          company: job.company,\n          location: job.location,\n          status: job.status,\n          interview: job.interview\n        })\n      }).then(resp => resp.json()).then(updatedJob => {\n        let updatedJobList = this.state.jobs.map(job => job.id === updatedJob.id ? job = updatedJob : job);\n        this.setState({\n          jobs: updatedJobList,\n          jobsDisplay: updatedJobList\n        });\n      });\n    };\n\n    this.deleteJob = job => {\n      fetch(`http://localhost:3000/jobs/${job.id}`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${localStorage.token}`\n        }\n      }).then(resp => resp.json()).then(remainingJobs => {\n        this.setState({\n          jobs: remainingJobs,\n          jobsDisplay: remainingJobs\n        });\n      });\n    };\n\n    this.setFilter = event => {\n      let filter = event.target.dataset.filter;\n      let filteredJobs;\n      filter === \"*\" ? filteredJobs = this.state.jobs : filteredJobs = this.state.jobs.filter(job => job.status === filter);\n      this.setState({\n        jobsDisplay: filteredJobs\n      });\n    };\n\n    this.state = {\n      jobs: false,\n      jobsDisplay: false,\n      user_id: props.user.id,\n      showJob: null,\n      search: '',\n      sortAsc: true\n    };\n  }\n\n  componentDidMount() {\n    fetch(`http://localhost:3000/users/${this.state.user_id}/jobs`, {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${localStorage.token}`\n      }\n    }).then(resp => resp.json()).then(jobData => {\n      this.setState({\n        jobs: jobData,\n        jobsDisplay: jobData\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(JobForm, {\n      addJob: this.addJob,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(List, {\n      title: \" \",\n      items: this.state.jobsDisplay,\n      handleShowJob: this.handleShowJob,\n      handleSearch: this.handleSearch,\n      setFilter: this.setFilter,\n      handleSort: this.handleSort,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 10\n      }\n    }), this.state.showJob ? /*#__PURE__*/React.createElement(JobModalShow, {\n      job: this.state.showJob,\n      deleteJob: this.deleteJob,\n      editJob: this.editJob,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }\n    }) : null);\n  }\n\n}","map":{"version":3,"sources":["/Users/paulhoffart/Desktop/Atomic-Job/atomic-job-front-end/src/containers/Jobs.js"],"names":["React","List","JobForm","JobModalShow","Jobs","Component","constructor","props","handleShowJob","job","setState","showJob","handleBack","handleSearch","e","searchedJobs","state","jobs","filter","title","toLowerCase","includes","target","value","company","location","targe","tolo","jobsDisplay","handleSort","sortBy","getAttribute","sorted","sortAsc","sort","jobA","jobB","addJob","event","preventDefault","postObject","method","headers","Authorization","localStorage","token","body","JSON","stringify","url","status","interview","user_id","reset","fetch","then","resp","json","newJob","console","log","push","editJob","id","updatedJob","updatedJobList","map","deleteJob","remainingJobs","setFilter","dataset","filteredJobs","user","search","componentDidMount","jobData","render"],"mappings":"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","sourcesContent":["import React from 'react'\n// import JobShow from \"../components/JobShow\"\n// import JobList from \"../void/JobList\"\nimport List from '../components/List'\nimport JobForm from \"../components/JobForm\"\nimport JobModalShow from '../components/JobModalShow'\n\n\nexport default class Jobs extends React.Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n      jobs : false, \n      jobsDisplay: false, \n      user_id: props.user.id,\n      showJob: null,\n      search: '',\n      sortAsc: true                      \n    }\n  }\n\n  componentDidMount(){\n    fetch(`http://localhost:3000/users/${this.state.user_id}/jobs`, {\n      method: \"GET\", \n      headers: {\n        Authorization: `Bearer ${localStorage.token}`\n      }\n    })\n    .then(resp => resp.json())\n    .then( jobData => {\n      this.setState({\n        jobs: jobData,\n        jobsDisplay: jobData,\n      })\n    })\n  }\n  \n  handleShowJob = (job) => {\n    this.setState({\n      showJob: job\n    })\n  }\n\n  handleBack = () => {\n    this.setState({\n      showJob: null\n    })\n  }\n\n  handleSearch = (e) => {\n    let searchedJobs = this.state.jobs.filter(job => job.title.toLowerCase().includes(e.target.value.toLowerCase()) || job.company.toLowerCase().includes(e.target.value.toLowerCase()) || job.location.toLowerCase(e.targe.value.tolo))\n    this.setState({jobsDisplay: searchedJobs})\n  }\n\n  handleSort = (e) => {\n    let sortBy = e.target.getAttribute(\"name\")\n    let sorted\n    this.state.sortAsc\n    ? sorted = this.state.jobsDisplay.sort( (jobA, jobB) => jobA[sortBy] > jobB[sortBy] ? 1 : -1 )\n    : sorted = this.state.jobsDisplay.sort( (jobA, jobB) => jobA[sortBy] > jobB[sortBy] ? -1 : 1 )\n    this.setState({\n      sortAsc: !this.state.sortAsc,\n      jobsDisplay: sorted\n    })\n  } \n\n  addJob = (event) => {\n    event.preventDefault()\n    let postObject = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.token}`\n      },\n      body: JSON.stringify({\n        title: event.target[0].value,\n        company: event.target[1].value,\n        location: event.target[2].value,\n        url: event.target[3].value,\n        status: \"Not Applied\",\n        interview: \"false\",\n        user_id: this.state.user_id\n      })\n    }\n    event.target.reset()\n    fetch(\"http://localhost:3000/jobs\", postObject)\n    .then(resp => resp.json())\n    .then(newJob => {\n      console.log(\"newJob posted\", newJob)\n      this.state.jobs ? this.state.jobs.push(newJob) :  this.state.jobs = [newJob]\n      this.setState({\n        jobs: this.state.jobs,\n        jobsDisplay: this.state.jobs\n      })\n    })\n  }\n\n  editJob = (job) => {\n    fetch(`http://localhost:3000/jobs/${job.id}`,{\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.token}`\n      },\n      body: JSON.stringify({ \n        title: job.title,\n        company: job.company,\n        location: job.location,\n        status: job.status,\n        interview: job.interview\n      })\n    })\n    .then(resp => resp.json())\n    .then(updatedJob => {\n      let updatedJobList = this.state.jobs.map(job => \n        job.id === updatedJob.id ? job = updatedJob : job\n      )\n      this.setState({\n        jobs: updatedJobList,\n        jobsDisplay: updatedJobList\n      })\n    })\n  }\n\n  deleteJob = (job) => {\n    fetch(`http://localhost:3000/jobs/${job.id}`,{\n      method: \"DELETE\",\n      headers: {\n        Authorization: `Bearer ${localStorage.token}`\n      }\n    })\n    .then(resp => resp.json())\n    .then(remainingJobs => {\n      this.setState({\n        jobs: remainingJobs,\n        jobsDisplay: remainingJobs\n      })\n    })\n  }\n\n  setFilter = (event) => {\n    let filter = event.target.dataset.filter\n    let filteredJobs\n    filter === \"*\"\n    ? filteredJobs = this.state.jobs\n    : filteredJobs = this.state.jobs.filter( job => job.status === filter )\n    this.setState({\n      jobsDisplay: filteredJobs\n    })\n  }\n\n  render(){\n    return (\n      <div>\n        <JobForm addJob={this.addJob}/>\n         <List title = \" \" items={this.state.jobsDisplay} handleShowJob={this.handleShowJob} handleSearch={this.handleSearch} setFilter={this.setFilter} handleSort={this.handleSort}/>\n        { this.state.showJob \n        ? <JobModalShow job={this.state.showJob} deleteJob={this.deleteJob} editJob={this.editJob}/> \n        : null }\n      </div>\n    )\n  }\n\n}\n\n"]},"metadata":{},"sourceType":"module"}