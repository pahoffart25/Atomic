{"ast":null,"code":"var _jsxFileName = \"/Users/paulhoffart/Desktop/Atomic-Job/atomic-job-front-end/src/components/JobShow.js\";\nimport React from 'react';\nimport NotesBox from './NotesBox';\nimport TasksBox from './TasksBox';\nexport default class JobShow extends React.Component {\n  constructor() {\n    super();\n\n    this.handleTaskChange = (event, taskEditing) => {\n      let taskList = this.state.tasks;\n      taskEditing.item = event.target.value;\n      taskList.map(task => {\n        if (task === taskEditing) {\n          task.item = taskEditing.item;\n        }\n      });\n      this.setState({\n        tasks: taskList\n      });\n    };\n\n    this.addTask = (event, task) => {\n      event.preventDefault();\n      fetch(`http://localhost:3000/job_tasks`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          item: event.target[0].value,\n          closed: false,\n          job_id: this.props.job.id\n        })\n      }).then(resp => resp.json()).then(newTask => {\n        // event.target.reset() # (TypeError): Cannot read property 'reset' of null\n        this.state.tasks.push(newTask);\n        this.setState({\n          tasks: this.state.tasks\n        });\n      });\n    };\n\n    this.editTask = (event, task) => {\n      // task here will already have updated value bc of onChange updating it\n      // or closed being toggle within the Task component \n      fetch(`http://localhost:3000/job_tasks/${task.id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(task)\n      }).then(resp => resp.json()).then(updatedTask => {\n        let taskList = this.state.tasks;\n        taskList.map(task => {\n          if (task.id === updatedTask.id) {\n            task = updatedTask;\n          }\n        });\n        this.setState({\n          tasks: taskList\n        });\n      });\n    };\n\n    this.deleteTask = task => {\n      fetch(`http://localhost:3000/job_tasks/${task.id}`, {\n        method: \"DELETE\"\n      }).then(resp => resp.json()).then(reminaingTaskList => {\n        this.setState({\n          tasks: reminaingTaskList\n        });\n      });\n    };\n\n    this.handleNoteChange = (event, noteEditing) => {\n      let noteList = this.state.notes;\n      noteEditing.content = event.target.value;\n      noteList.map(note => {\n        if (note === noteEditing) {\n          note.item = noteEditing.content;\n        }\n      });\n      this.setState({\n        notes: noteList\n      });\n    };\n\n    this.editNote = (event, note) => {\n      // note here will already have updated value bc of onChange updating it\n      fetch(`http://localhost:3000/notes/${note.id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(note)\n      }).then(resp => resp.json()).then(updatedNote => {\n        let noteList = this.state.notes;\n        noteList.map(note => {\n          if (note.id === updatedNote.id) {\n            note = updatedNote;\n          }\n        });\n        this.setState({\n          notes: noteList\n        });\n      });\n    };\n\n    this.addNote = (event, note) => {\n      event.preventDefault();\n      fetch(`http://localhost:3000/notes`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          content: event.target[0].value,\n          job_id: this.props.job.id\n        })\n      }).then(resp => resp.json()).then(newNote => {\n        // event.target.reset() # (TypeError): Cannot read property 'reset' of null\n        this.state.notes.push(newNote);\n        this.setState({\n          notes: this.state.notes\n        });\n      });\n    };\n\n    this.deleteNote = note => {\n      fetch(`http://localhost:3000/notes/${note.id}`, {\n        method: \"DELETE\"\n      }).then(resp => resp.json()).then(remainingNoteList => {\n        this.setState({\n          notes: remainingNoteList\n        });\n      });\n    };\n\n    this.changeStatus = event => {\n      fetch(`http://localhost:3000/jobs/${this.props.job.id}`, {\n        method: \"PATCH\",\n        headers: \"Content-Type\",\n        body: JSON.stringify({\n          status: event.target.value\n        }).then(updatedJob => {\n          debugger; // how do i make this component rerender with the new job\n          // is this why they tell us to keep one state. idk. \n        })\n      });\n    };\n\n    this.state = {\n      notes: null,\n      tasks: null\n    };\n  } // or is it better to fetch all notes and tasks while you fetch all jobs\n\n\n  componentDidMount() {\n    fetch(`http://localhost:3000/jobs/${this.props.job.id}`).then(resp => resp.json()).then(jobData => {\n      this.setState({\n        notes: jobData.notes,\n        tasks: jobData.tasks\n      });\n    });\n  }\n\n  render() {\n    const divStyle = {\n      display: \"grid\",\n      width: \"100%\",\n      gridTemplateColumns: \"repeat(2, 1fr)\",\n      gridColumnGap: \"10px\",\n      marginLeft: \"30px\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"jumbotron\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: this.props.job.url,\n      target: \"_blank\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }\n    }, \" \", this.props.job.title, \" \")), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }\n    }, \" \", this.props.job.company, \" \"), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }\n    }, \" \", this.props.job.location, \" \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group mb-3\",\n      style: {\n        width: \"20%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"input-group-text\",\n      htmlFor: \"inputGroupSelect01\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 15\n      }\n    }, \"Status\")), /*#__PURE__*/React.createElement(\"select\", {\n      className: \"custom-select\",\n      id: \"inputGroupSelect01\",\n      value: this.props.job.status,\n      onChange: this.changeStatus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"apply\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 15\n      }\n    }, \"Apply\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"follow-up\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 15\n      }\n    }, \"Follow-Up\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"closed\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    }, \"Closed\")))), /*#__PURE__*/React.createElement(\"div\", {\n      style: divStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }\n    }, this.state.notes ? /*#__PURE__*/React.createElement(NotesBox, {\n      notes: this.state.notes,\n      editNote: this.editNote,\n      addNote: this.addNote,\n      editNote: this.editNote,\n      deleteNote: this.deleteNote,\n      handleNoteChange: this.handleNoteChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 15\n      }\n    }) : null, this.state.tasks ? /*#__PURE__*/React.createElement(TasksBox, {\n      tasks: this.state.tasks,\n      addTask: this.addTask,\n      editTask: this.editTask,\n      deleteTask: this.deleteTask,\n      handleTaskChange: this.handleTaskChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 15\n      }\n    }) : null));\n  }\n\n}","map":{"version":3,"sources":["/Users/paulhoffart/Desktop/Atomic-Job/atomic-job-front-end/src/components/JobShow.js"],"names":["React","NotesBox","TasksBox","JobShow","Component","constructor","handleTaskChange","event","taskEditing","taskList","state","tasks","item","target","value","map","task","setState","addTask","preventDefault","fetch","method","headers","body","JSON","stringify","closed","job_id","props","job","id","then","resp","json","newTask","push","editTask","updatedTask","deleteTask","reminaingTaskList","handleNoteChange","noteEditing","noteList","notes","content","note","editNote","updatedNote","addNote","newNote","deleteNote","remainingNoteList","changeStatus","status","updatedJob","componentDidMount","jobData","render","divStyle","display","width","gridTemplateColumns","gridColumnGap","marginLeft","url","title","company","location"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,QAAP,MAAqB,YAArB;AAGA,eAAe,MAAMC,OAAN,SAAsBH,KAAK,CAACI,SAA5B,CAAsC;AAEnDC,EAAAA,WAAW,GAAE;AACX;;AADW,SAoBZC,gBApBY,GAoBO,CAACC,KAAD,EAAQC,WAAR,KAAwB;AAC1C,UAAIC,QAAQ,GAAG,KAAKC,KAAL,CAAWC,KAA1B;AACAH,MAAAA,WAAW,CAACI,IAAZ,GAAmBL,KAAK,CAACM,MAAN,CAAaC,KAAhC;AACAL,MAAAA,QAAQ,CAACM,GAAT,CAAaC,IAAI,IAAI;AACnB,YAAIA,IAAI,KAAKR,WAAb,EAA0B;AACxBQ,UAAAA,IAAI,CAACJ,IAAL,GAAYJ,WAAW,CAACI,IAAxB;AACD;AACF,OAJD;AAKA,WAAKK,QAAL,CAAc;AACZN,QAAAA,KAAK,EAAEF;AADK,OAAd;AAGD,KA/BY;;AAAA,SAiCbS,OAjCa,GAiCH,CAACX,KAAD,EAAQS,IAAR,KAAiB;AACzBT,MAAAA,KAAK,CAACY,cAAN;AACAC,MAAAA,KAAK,CAAE,iCAAF,EAAoC;AACvCC,QAAAA,MAAM,EAAE,MAD+B;AAEvCC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAF8B;AAKvCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBb,UAAAA,IAAI,EAAEL,KAAK,CAACM,MAAN,CAAa,CAAb,EAAgBC,KADH;AAEnBY,UAAAA,MAAM,EAAE,KAFW;AAGnBC,UAAAA,MAAM,EAAE,KAAKC,KAAL,CAAWC,GAAX,CAAeC;AAHJ,SAAf;AALiC,OAApC,CAAL,CAWCC,IAXD,CAWMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EAXd,EAYCF,IAZD,CAYMG,OAAO,IAAI;AACf;AACA,aAAKxB,KAAL,CAAWC,KAAX,CAAiBwB,IAAjB,CAAsBD,OAAtB;AACA,aAAKjB,QAAL,CAAc;AACZN,UAAAA,KAAK,EAAE,KAAKD,KAAL,CAAWC;AADN,SAAd;AAGD,OAlBD;AAmBD,KAtDY;;AAAA,SAwDbyB,QAxDa,GAwDF,CAAC7B,KAAD,EAAQS,IAAR,KAAiB;AAC1B;AACA;AACAI,MAAAA,KAAK,CAAE,mCAAkCJ,IAAI,CAACc,EAAG,EAA5C,EAA+C;AAClDT,QAAAA,MAAM,EAAE,OAD0C;AAElDC,QAAAA,OAAO,EAAE;AAAC,0BAAgB;AAAjB,SAFyC;AAGlDC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,IAAf;AAH4C,OAA/C,CAAL,CAKCe,IALD,CAKMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EALd,EAMCF,IAND,CAMMM,WAAW,IAAI;AACnB,YAAI5B,QAAQ,GAAG,KAAKC,KAAL,CAAWC,KAA1B;AACAF,QAAAA,QAAQ,CAACM,GAAT,CAAaC,IAAI,IAAE;AACjB,cAAGA,IAAI,CAACc,EAAL,KAAYO,WAAW,CAACP,EAA3B,EAA8B;AAC5Bd,YAAAA,IAAI,GAAGqB,WAAP;AACD;AACF,SAJD;AAKA,aAAKpB,QAAL,CAAc;AACZN,UAAAA,KAAK,EAAEF;AADK,SAAd;AAGD,OAhBD;AAiBD,KA5EY;;AAAA,SA8Eb6B,UA9Ea,GA8ECtB,IAAD,IAAU;AACrBI,MAAAA,KAAK,CAAE,mCAAkCJ,IAAI,CAACc,EAAG,EAA5C,EAA8C;AACjDT,QAAAA,MAAM,EAAE;AADyC,OAA9C,CAAL,CAGCU,IAHD,CAGMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EAHd,EAICF,IAJD,CAIMQ,iBAAiB,IAAI;AACzB,aAAKtB,QAAL,CAAc;AACZN,UAAAA,KAAK,EAAE4B;AADK,SAAd;AAGD,OARD;AASD,KAxFY;;AAAA,SA2FbC,gBA3Fa,GA2FM,CAACjC,KAAD,EAAQkC,WAAR,KAAwB;AACzC,UAAIC,QAAQ,GAAG,KAAKhC,KAAL,CAAWiC,KAA1B;AACAF,MAAAA,WAAW,CAACG,OAAZ,GAAsBrC,KAAK,CAACM,MAAN,CAAaC,KAAnC;AACA4B,MAAAA,QAAQ,CAAC3B,GAAT,CAAa8B,IAAI,IAAI;AACnB,YAAIA,IAAI,KAAKJ,WAAb,EAA0B;AACxBI,UAAAA,IAAI,CAACjC,IAAL,GAAY6B,WAAW,CAACG,OAAxB;AACD;AACF,OAJD;AAKA,WAAK3B,QAAL,CAAc;AACZ0B,QAAAA,KAAK,EAAED;AADK,OAAd;AAGD,KAtGY;;AAAA,SAwGbI,QAxGa,GAwGF,CAACvC,KAAD,EAAQsC,IAAR,KAAiB;AAC1B;AACAzB,MAAAA,KAAK,CAAE,+BAA8ByB,IAAI,CAACf,EAAG,EAAxC,EAA2C;AAC9CT,QAAAA,MAAM,EAAE,OADsC;AAE9CC,QAAAA,OAAO,EAAE;AAAC,0BAAgB;AAAjB,SAFqC;AAG9CC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeoB,IAAf;AAHwC,OAA3C,CAAL,CAKCd,IALD,CAKMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EALd,EAMCF,IAND,CAMMgB,WAAW,IAAI;AACnB,YAAIL,QAAQ,GAAG,KAAKhC,KAAL,CAAWiC,KAA1B;AACAD,QAAAA,QAAQ,CAAC3B,GAAT,CAAa8B,IAAI,IAAE;AACjB,cAAGA,IAAI,CAACf,EAAL,KAAYiB,WAAW,CAACjB,EAA3B,EAA8B;AAC5Be,YAAAA,IAAI,GAAGE,WAAP;AACD;AACF,SAJD;AAKA,aAAK9B,QAAL,CAAc;AACZ0B,UAAAA,KAAK,EAAED;AADK,SAAd;AAGD,OAhBD;AAiBD,KA3HY;;AAAA,SA6HbM,OA7Ha,GA6HH,CAACzC,KAAD,EAAQsC,IAAR,KAAiB;AACzBtC,MAAAA,KAAK,CAACY,cAAN;AACAC,MAAAA,KAAK,CAAE,6BAAF,EAAgC;AACnCC,QAAAA,MAAM,EAAE,MAD2B;AAEnCC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAF0B;AAKnCC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBmB,UAAAA,OAAO,EAAErC,KAAK,CAACM,MAAN,CAAa,CAAb,EAAgBC,KADN;AAEnBa,UAAAA,MAAM,EAAE,KAAKC,KAAL,CAAWC,GAAX,CAAeC;AAFJ,SAAf;AAL6B,OAAhC,CAAL,CAUCC,IAVD,CAUMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EAVd,EAWCF,IAXD,CAWMkB,OAAO,IAAI;AACf;AACA,aAAKvC,KAAL,CAAWiC,KAAX,CAAiBR,IAAjB,CAAsBc,OAAtB;AACA,aAAKhC,QAAL,CAAc;AACZ0B,UAAAA,KAAK,EAAE,KAAKjC,KAAL,CAAWiC;AADN,SAAd;AAGD,OAjBD;AAmBD,KAlJY;;AAAA,SAoJbO,UApJa,GAoJCL,IAAD,IAAU;AACrBzB,MAAAA,KAAK,CAAE,+BAA8ByB,IAAI,CAACf,EAAG,EAAxC,EAA0C;AAC7CT,QAAAA,MAAM,EAAE;AADqC,OAA1C,CAAL,CAGCU,IAHD,CAGMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EAHd,EAICF,IAJD,CAIMoB,iBAAiB,IAAI;AACzB,aAAKlC,QAAL,CAAc;AACZ0B,UAAAA,KAAK,EAAEQ;AADK,SAAd;AAGD,OARD;AASD,KA9JY;;AAAA,SAgKbC,YAhKa,GAgKG7C,KAAD,IAAW;AACxBa,MAAAA,KAAK,CAAE,8BAA6B,KAAKQ,KAAL,CAAWC,GAAX,CAAeC,EAAG,EAAjD,EAAmD;AACtDT,QAAAA,MAAM,EAAE,OAD8C;AAEtDC,QAAAA,OAAO,EAAE,cAF6C;AAGtDC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnB4B,UAAAA,MAAM,EAAE9C,KAAK,CAACM,MAAN,CAAaC;AADF,SAAf,EAGLiB,IAHK,CAGAuB,UAAU,IAAI;AAClB,mBADkB,CAElB;AACA;AACD,SAPK;AAHgD,OAAnD,CAAL;AAaD,KA9KY;;AAEX,SAAK5C,KAAL,GAAa;AACXiC,MAAAA,KAAK,EAAE,IADI;AAEXhC,MAAAA,KAAK,EAAE;AAFI,KAAb;AAID,GARkD,CAUnD;;;AACA4C,EAAAA,iBAAiB,GAAE;AACjBnC,IAAAA,KAAK,CAAE,8BAA6B,KAAKQ,KAAL,CAAWC,GAAX,CAAeC,EAAG,EAAjD,CAAL,CACCC,IADD,CACMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADd,EAECF,IAFD,CAEMyB,OAAO,IAAI;AACf,WAAKvC,QAAL,CAAc;AACZ0B,QAAAA,KAAK,EAAEa,OAAO,CAACb,KADH;AAEZhC,QAAAA,KAAK,EAAE6C,OAAO,CAAC7C;AAFH,OAAd;AAID,KAPD;AAQD;;AA+JD8C,EAAAA,MAAM,GAAE;AACN,UAAMC,QAAQ,GAAG;AACfC,MAAAA,OAAO,EAAE,MADM;AAEfC,MAAAA,KAAK,EAAE,MAFQ;AAGfC,MAAAA,mBAAmB,EAAE,gBAHN;AAIfC,MAAAA,aAAa,EAAE,MAJA;AAKfC,MAAAA,UAAU,EAAE;AALG,KAAjB;AAOA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,IAAI,EAAE,KAAKnC,KAAL,CAAWC,GAAX,CAAemC,GAAxB;AAA6B,MAAA,MAAM,EAAC,QAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAM,KAAKpC,KAAL,CAAWC,GAAX,CAAeoC,KAArB,MADF,CADF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAM,KAAKrC,KAAL,CAAWC,GAAX,CAAeqC,OAArB,MAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAM,KAAKtC,KAAL,CAAWC,GAAX,CAAesC,QAArB,MALF,eAME;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAkC,MAAA,KAAK,EAAE;AAACP,QAAAA,KAAK,EAAE;AAAR,OAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,SAAS,EAAC,kBAAjB;AAAoC,MAAA,OAAO,EAAC,oBAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CADF,eAIE;AAAQ,MAAA,SAAS,EAAC,eAAlB;AAAkC,MAAA,EAAE,EAAC,oBAArC;AAA0D,MAAA,KAAK,EAAE,KAAKhC,KAAL,CAAWC,GAAX,CAAewB,MAAhF;AAAwF,MAAA,QAAQ,EAAE,KAAKD,YAAvG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAQ,MAAA,KAAK,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE;AAAQ,MAAA,KAAK,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFF,eAGE;AAAQ,MAAA,KAAK,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHF,CAJF,CANF,CADF,eAkBE;AAAK,MAAA,KAAK,EAAEM,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI,KAAKhD,KAAL,CAAWiC,KAAX,gBACE,oBAAC,QAAD;AACE,MAAA,KAAK,EAAE,KAAKjC,KAAL,CAAWiC,KADpB;AAEE,MAAA,QAAQ,EAAE,KAAKG,QAFjB;AAGE,MAAA,OAAO,EAAE,KAAKE,OAHhB;AAGyB,MAAA,QAAQ,EAAE,KAAKF,QAHxC;AAIE,MAAA,UAAU,EAAE,KAAKI,UAJnB;AAKE,MAAA,gBAAgB,EAAE,KAAKV,gBALzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,GAQE,IAVN,EAaI,KAAK9B,KAAL,CAAWC,KAAX,gBACE,oBAAC,QAAD;AACE,MAAA,KAAK,EAAE,KAAKD,KAAL,CAAWC,KADpB;AAEE,MAAA,OAAO,EAAE,KAAKO,OAFhB;AAGE,MAAA,QAAQ,EAAE,KAAKkB,QAHjB;AAIE,MAAA,UAAU,EAAE,KAAKE,UAJnB;AAKE,MAAA,gBAAgB,EAAE,KAAKhC,gBALzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,GAOE,IApBN,CAlBF,CADF;AA4CD;;AAvOkD","sourcesContent":["import React from 'react'\nimport NotesBox from './NotesBox'\nimport TasksBox from './TasksBox'\n\n\nexport default class JobShow extends React.Component {\n\n  constructor(){\n    super()\n    this.state = {\n      notes: null,\n      tasks: null,\n    } \n  }\n\n  // or is it better to fetch all notes and tasks while you fetch all jobs\n  componentDidMount(){\n    fetch(`http://localhost:3000/jobs/${this.props.job.id}`)\n    .then(resp => resp.json())\n    .then(jobData => {\n      this.setState({\n        notes: jobData.notes,\n        tasks: jobData.tasks\n      })\n    })\n  }\n\n   handleTaskChange = (event, taskEditing) => {\n    let taskList = this.state.tasks\n    taskEditing.item = event.target.value\n    taskList.map(task => {\n      if (task === taskEditing ){\n        task.item = taskEditing.item\n      }\n    })\n    this.setState({\n      tasks: taskList\n    })\n  }\n\n  addTask = (event, task) => {\n    event.preventDefault()\n    fetch(`http://localhost:3000/job_tasks`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        item: event.target[0].value,\n        closed: false,\n        job_id: this.props.job.id\n      })\n    })\n    .then(resp => resp.json())\n    .then(newTask => {\n      // event.target.reset() # (TypeError): Cannot read property 'reset' of null\n      this.state.tasks.push(newTask)\n      this.setState({\n        tasks: this.state.tasks\n      })\n    })\n  }\n\n  editTask = (event, task) => {\n    // task here will already have updated value bc of onChange updating it\n    // or closed being toggle within the Task component \n    fetch(`http://localhost:3000/job_tasks/${task.id}`, {\n      method: \"PATCH\",\n      headers: {\"Content-Type\": \"application/json\"}, \n      body: JSON.stringify(task)\n    })\n    .then(resp => resp.json())\n    .then(updatedTask => {\n      let taskList = this.state.tasks\n      taskList.map(task=>{\n        if(task.id === updatedTask.id){\n          task = updatedTask\n        }\n      })\n      this.setState({\n        tasks: taskList\n      })\n    })\n  }\n\n  deleteTask = (task) => {\n    fetch(`http://localhost:3000/job_tasks/${task.id}`,{\n      method: \"DELETE\"\n    })\n    .then(resp => resp.json())\n    .then(reminaingTaskList => {\n      this.setState({\n        tasks: reminaingTaskList\n      })\n    })\n  }\n\n\n  handleNoteChange = (event, noteEditing) => {\n    let noteList = this.state.notes\n    noteEditing.content = event.target.value\n    noteList.map(note => {\n      if (note === noteEditing ){\n        note.item = noteEditing.content\n      }\n    })\n    this.setState({\n      notes: noteList\n    })\n  }\n\n  editNote = (event, note) => {\n    // note here will already have updated value bc of onChange updating it\n    fetch(`http://localhost:3000/notes/${note.id}`, {\n      method: \"PATCH\",\n      headers: {\"Content-Type\": \"application/json\"}, \n      body: JSON.stringify(note)\n    })\n    .then(resp => resp.json())\n    .then(updatedNote => {\n      let noteList = this.state.notes\n      noteList.map(note=>{\n        if(note.id === updatedNote.id){\n          note = updatedNote\n        }\n      })\n      this.setState({\n        notes: noteList\n      })\n    })\n  }\n\n  addNote = (event, note) => {\n    event.preventDefault()\n    fetch(`http://localhost:3000/notes`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        content: event.target[0].value,\n        job_id: this.props.job.id\n      })\n    })\n    .then(resp => resp.json())\n    .then(newNote => {\n      // event.target.reset() # (TypeError): Cannot read property 'reset' of null\n      this.state.notes.push(newNote)\n      this.setState({\n        notes: this.state.notes\n      })\n    })\n    \n  }\n\n  deleteNote = (note) => {\n    fetch(`http://localhost:3000/notes/${note.id}`,{\n      method: \"DELETE\"\n    })\n    .then(resp => resp.json())\n    .then(remainingNoteList => {\n      this.setState({\n        notes: remainingNoteList\n      })\n    })\n  }\n\n  changeStatus = (event) => {\n    fetch(`http://localhost:3000/jobs/${this.props.job.id}`,{\n      method: \"PATCH\",\n      headers: \"Content-Type\",\n      body: JSON.stringify({\n        status: event.target.value\n      })\n      .then(updatedJob => {\n        debugger\n        // how do i make this component rerender with the new job\n        // is this why they tell us to keep one state. idk. \n      })\n    })\n    \n  }\n  \n\n  render(){\n    const divStyle = {\n      display: \"grid\",\n      width: \"100%\",\n      gridTemplateColumns: \"repeat(2, 1fr)\",\n      gridColumnGap: \"10px\",\n      marginLeft: \"30px\"\n    }\n    return(\n      <div> \n        <div className=\"jumbotron\">\n          <a href={this.props.job.url} target=\"_blank\">\n            <h1> {this.props.job.title} </h1> \n          </a>\n          <h2> {this.props.job.company} </h2>\n          <h3> {this.props.job.location} </h3>\n          <div className=\"input-group mb-3\" style={{width: \"20%\"}}>\n            <div className=\"input-group-prepend\">\n              <label className=\"input-group-text\" htmlFor=\"inputGroupSelect01\">Status</label>\n            </div>\n            <select className=\"custom-select\" id=\"inputGroupSelect01\" value={this.props.job.status} onChange={this.changeStatus}>\n              <option value=\"apply\">Apply</option>\n              <option value=\"follow-up\">Follow-Up</option>\n              <option value=\"closed\">Closed</option>\n            </select>\n          </div>\n        </div>\n        <div style={divStyle}>\n          {\n            this.state.notes \n            ? <NotesBox \n                notes={this.state.notes} \n                editNote={this.editNote}\n                addNote={this.addNote} editNote={this.editNote} \n                deleteNote={this.deleteNote}\n                handleNoteChange={this.handleNoteChange}/> \n\n            : null\n          }\n          {\n            this.state.tasks \n            ? <TasksBox \n                tasks={this.state.tasks} \n                addTask={this.addTask} \n                editTask={this.editTask} \n                deleteTask={this.deleteTask} \n                handleTaskChange={this.handleTaskChange}/>\n            : null\n          }\n        </div>\n      </div>\n    )\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}