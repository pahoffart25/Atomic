{"ast":null,"code":"var _jsxFileName = \"/Users/paulhoffart/Desktop/Atomic-Job/atomic-job-front-end/src/components/NotesBrowser.js\";\nimport React from 'react';\nimport NoteModalShow from \"./NoteModalShow\";\nimport NoteModalCreate from \"./NoteModalCreate\";\nexport default class NotesBrowser extends React.Component {\n  constructor() {\n    super();\n\n    this.setFilter = event => {\n      let filter = event.target.dataset.filter;\n      let filteredNotes;\n      filter === \"*\" ? filteredNotes = this.state.notes : filteredNotes = this.state.notes.filter(note => note.category === filter);\n      this.setState({\n        filter: event.target.dataset.filter,\n        notesDisplay: filteredNotes\n      });\n    };\n\n    this.shortTheNote = content => {\n      if (content.length < 300) {\n        return content;\n      } else {\n        let shortValue = content.substring(0, content.indexOf(\" \", 280));\n\n        if (shortValue.charAt(shortValue.length - 1) === \",\") {\n          shortValue = shortValue.substring(0, shortValue.length - 2);\n        }\n\n        return shortValue + \"...\";\n      }\n    };\n\n    this.showNoteCard = note => {\n      let icon = '';\n\n      switch (note.category) {\n        case 'event':\n          icon = \"icon-calendar d-block\";\n          break;\n\n        case 'lead':\n          icon = \"icon-exclamation-triangle d-block\";\n          break;\n\n        case 'company':\n          icon = \"icon-briefcase d-block\";\n          break;\n\n        case 'misc':\n          icon = \"icon-question d-block\";\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-6 col-md-6 col-lg-4 mb-4 mb-lg-5\",\n        key: note.id,\n        \"data-toggle\": \"modal\",\n        \"data-target\": \"#show-note\",\n        \"data-category\": note.category,\n        onClick: () => this.setShowNote(note),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"block__16443 text-center d-block\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"custom-icon mx-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: `${icon}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 49\n        }\n      })), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }\n      }, note.title), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mess\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }\n      }, this.shortTheNote(note.content)))));\n    };\n\n    this.setShowNote = note => {\n      // not sure you why you have to double click on card the first time load page \n      this.setState({\n        showNote: note\n      });\n    };\n\n    this.newNote = note => {\n      fetch(\"http://localhost:3000/user_notes\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.token}`\n        },\n        body: JSON.stringify({\n          title: note.title,\n          content: note.content,\n          category: note.category,\n          user_id: this.props.user.id\n        })\n      }).then(resp => resp.json()).then(newNote => {\n        this.state.notes.push(newNote);\n        this.setState({\n          notes: this.state.notes,\n          notesDisplay: this.state.notes\n        });\n      });\n    };\n\n    this.editNote = () => {\n      fetch(`http://localhost:3000/user_notes/${this.state.showNote.id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.token}`\n        },\n        body: JSON.stringify(this.state.showNote)\n      }).then(resp => resp.json()).then(updatedNote => {\n        let updatedList = this.state.notes.map(note => note.id === updatedNote.id ? note = updatedNote : note);\n        this.setState({\n          notes: updatedList,\n          notesDisplay: updatedList\n        });\n      });\n    };\n\n    this.deleteNote = () => {\n      fetch(`http://localhost:3000/user_notes/${this.state.showNote.id}`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${localStorage.token}`\n        }\n      }).then(resp => resp.json()).then(remainingNotes => {\n        debugger; // or should i have the back end not render anything back\n        // just remove element from array \n\n        this.setState({\n          notes: remainingNotes,\n          notesDisplay: remainingNotes\n        });\n      });\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        showNote: { ...this.state.showNote,\n          [event.target.name]: event.target.value\n        }\n      });\n    };\n\n    this.state = {\n      notes: [],\n      notesDisplay: [],\n      showNote: null,\n      filter: null\n    };\n  }\n\n  componentDidMount() {\n    fetch(`http://localhost:3000/users/${this.props.user.id}/notes`, {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${localStorage.token}`\n      }\n    }).then(resp => resp.json()).then(notesData => {\n      this.setState({\n        notes: notesData,\n        notesDisplay: notesData,\n        showNote: null\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"site-section services-section bg-light block__62849 pt-5\",\n      id: \"next-section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center mb-5\",\n      \"data-aos\": \"fade-down\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"filters\",\n      className: \"filters text-center button-group col-md-7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      \"data-filter\": \"*\",\n      onClick: this.setFilter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }\n    }, \"All\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      \"data-filter\": \"event\",\n      onClick: this.setFilter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 15\n      }\n    }, \"Events\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      \"data-filter\": \"lead\",\n      onClick: this.setFilter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 15\n      }\n    }, \"Leads\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      \"data-filter\": \"company\",\n      onClick: this.setFilter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 15\n      }\n    }, \"Companies\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      \"data-filter\": \"misc\",\n      onClick: this.setFilter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 15\n      }\n    }, \"Misc\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 col-md-6 col-lg-4 mb-4 mb-lg-5\",\n      \"data-toggle\": \"modal\",\n      \"data-target\": \"#create-note\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      href: \"service-single.html\",\n      className: \"block__16443 text-center d-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"custom-icon mx-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-note d-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 57\n      }\n    })), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 19\n      }\n    }, \"New Note \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 19\n      }\n    }, \"Add Notes About Events, Leads or Companies\")))), this.state.notesDisplay.map(note => this.showNoteCard(note)))), /*#__PURE__*/React.createElement(NoteModalCreate, {\n      newNote: this.newNote,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }\n    }), this.state.showNote ? /*#__PURE__*/React.createElement(NoteModalShow, {\n      note: this.state.showNote,\n      handleChange: this.handleChange,\n      editNote: this.editNote,\n      deleteNote: this.deleteNote,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    }) : null);\n  }\n\n}","map":{"version":3,"sources":["/Users/paulhoffart/Desktop/Atomic-Job/atomic-job-front-end/src/components/NotesBrowser.js"],"names":["React","NoteModalShow","NoteModalCreate","NotesBrowser","Component","constructor","setFilter","event","filter","target","dataset","filteredNotes","state","notes","note","category","setState","notesDisplay","shortTheNote","content","length","shortValue","substring","indexOf","charAt","showNoteCard","icon","id","setShowNote","title","showNote","newNote","fetch","method","headers","Authorization","localStorage","token","body","JSON","stringify","user_id","props","user","then","resp","json","push","editNote","updatedNote","updatedList","map","deleteNote","remainingNotes","handleChange","name","value","componentDidMount","notesData","render"],"mappings":"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","sourcesContent":["import React from 'react'\nimport NoteModalShow from \"./NoteModalShow\"\nimport NoteModalCreate from \"./NoteModalCreate\"\n\nexport default class NotesBrowser extends React.Component{\n\n  constructor(){\n    super()\n    this.state = {\n      notes: [],\n      notesDisplay: [],\n      showNote: null,\n      filter: null \n    } \n  }\n\n  componentDidMount(){\n    fetch(`http://localhost:3000/users/${this.props.user.id}/notes`, {\n    method: \"GET\",\n    headers: {\n      Authorization: `Bearer ${localStorage.token}`\n    }\n    })\n    .then(resp=>resp.json())\n    .then(notesData => {\n      this.setState({\n        notes: notesData,\n        notesDisplay: notesData,\n        showNote: null \n      })\n    })\n  }\n\n  setFilter = (event) => {\n    let filter = event.target.dataset.filter\n    let filteredNotes\n    filter === \"*\"\n    ? filteredNotes = this.state.notes \n    : filteredNotes = this.state.notes.filter(note => note.category === filter)\n    this.setState({\n      filter: event.target.dataset.filter,\n      notesDisplay: filteredNotes\n    })\n  }\n\n  shortTheNote = (content) =>{\n    if (content.length < 300){\n      return content\n    }\n    else {\n      let shortValue = content.substring(0, content.indexOf(\" \", 280))\n\n      if (shortValue.charAt(shortValue.length -1) === \",\") {\n        shortValue = shortValue.substring(0, shortValue.length -2)\n      }\n      return shortValue + \"...\"\n    }\n  }\n\n  showNoteCard = (note) => {\n    let icon= ''\n    switch(note.category){\n      case 'event':\n        icon = \"icon-calendar d-block\"\n        break;\n      case 'lead':\n        icon = \"icon-exclamation-triangle d-block\"\n        break;\n      case 'company':\n        icon = \"icon-briefcase d-block\"\n        break;\n      case 'misc':\n          icon = \"icon-question d-block\"\n    }\n      \n      return(\n      <div className=\"col-6 col-md-6 col-lg-4 mb-4 mb-lg-5\" key={note.id} data-toggle=\"modal\" data-target=\"#show-note\" data-category={note.category} onClick={() => this.setShowNote(note)}>\n        <div  className=\"block__16443 text-center d-block\">\n          <span className=\"custom-icon mx-auto\"><span className= {`${icon}`} ></span></span>\n          <h3>{note.title}</h3>\n          <div className=\"mess\">\n            <span>{this.shortTheNote(note.content)}</span>\n          </div>\n          {/* <p className=\"note-text\">{note.content}</p> */}\n        </div>\n      </div>\n      )\n  }\n\n  setShowNote = (note) => {\n    // not sure you why you have to double click on card the first time load page \n    this.setState({\n      showNote: note\n    })\n\n  }\n\n  newNote = (note) => {\n    fetch(\"http://localhost:3000/user_notes\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.token}`\n      },\n      body: JSON.stringify({\n        title: note.title,\n        content: note.content,\n        category: note.category, \n        user_id: this.props.user.id\n      })\n    })\n    .then(resp => resp.json())\n    .then(newNote => {\n      this.state.notes.push(newNote)\n      this.setState({\n        notes: this.state.notes,\n        notesDisplay: this.state.notes\n      })\n    })\n  }\n\n  editNote = () => {\n    fetch(`http://localhost:3000/user_notes/${this.state.showNote.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.token}`\n      },\n      body: JSON.stringify(this.state.showNote)\n    })\n    .then(resp => resp.json())\n    .then(updatedNote => {\n      let updatedList = this.state.notes.map( note => \n        note.id === updatedNote.id ?  note = updatedNote : note\n      )\n      this.setState({\n        notes: updatedList,\n        notesDisplay: updatedList\n      })\n    })\n  }\n\n  deleteNote = () => {\n    fetch(`http://localhost:3000/user_notes/${this.state.showNote.id}`,{\n      method: \"DELETE\",\n      headers: {\n        Authorization: `Bearer ${localStorage.token}`\n      }\n    })\n    .then(resp => resp.json())\n    .then(remainingNotes => {\n      debugger\n      // or should i have the back end not render anything back\n      // just remove element from array \n      this.setState({\n        notes: remainingNotes,\n        notesDisplay: remainingNotes\n      })\n    })\n  }\n\n\n  handleChange = (event) => {\n    this.setState({showNote: {...this.state.showNote, [event.target.name]: event.target.value}})\n  }\n\n  render(){\n    return(\n\n      <section className=\"site-section services-section bg-light block__62849 pt-5\" id=\"next-section\">\n        <div className=\"container\">\n\n          {/* not sure how to make data-filter work tbh  */}\n          <div className=\"row justify-content-center mb-5\" data-aos=\"fade-down\">\n            <div id=\"filters\" className=\"filters text-center button-group col-md-7\">\n              <button className=\"btn btn-primary\" data-filter=\"*\" onClick={this.setFilter}>All</button>\n              <button className=\"btn btn-primary\" data-filter=\"event\" onClick={this.setFilter}>Events</button>\n              <button className=\"btn btn-primary\" data-filter=\"lead\" onClick={this.setFilter}>Leads</button>\n              <button className=\"btn btn-primary\" data-filter=\"company\" onClick={this.setFilter}>Companies</button>\n              <button className=\"btn btn-primary\" data-filter=\"misc\" onClick={this.setFilter}>Misc</button>\n            </div>\n          </div>  \n\n          <div className=\"row\" >\n            {/* Create a New Note*/}\n            <div  className=\"col-6 col-md-6 col-lg-4 mb-4 mb-lg-5\" data-toggle=\"modal\" data-target=\"#create-note\" >\n              <div>\n                <div href=\"service-single.html\" className=\"block__16443 text-center d-block\">\n                  <span className=\"custom-icon mx-auto\"><span className=\"icon-note d-block\"></span></span>\n                  <h3>New Note </h3>\n                  <p>Add Notes About Events, Leads or Companies</p>\n                </div>\n              </div>\n            </div> \n            {/* Existing Notes */}\n            {this.state.notesDisplay.map(note => this.showNoteCard(note))}\n          </div>\n        </div>\n        <NoteModalCreate  newNote={this.newNote}  />\n        {\n          \n          this.state.showNote\n          ? <NoteModalShow note={this.state.showNote} handleChange = {this.handleChange} editNote={this.editNote} deleteNote={this.deleteNote}/>\n          : null\n        }\n      </section>\n    )\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}